<html>
<head>
    <title>Test</title>
    <style type="text/css">
        input {
            width: 100%;
        }
        .center {
            margin: auto;
            text-align: center;
            width: 50%;
        }
        .border {
            border: 3px solid green;
            padding: 10px;
        }
        .spacer {
            background-color: transparent;;
            height: 44px;
        }
    </style>
    <script type="text/javascript">
    function buildQueryPairsFromArguments(args) {
        if (!args) {
            return [];
        }

        let pairs = [];

        for (const name in args) {
            var dict = args;
            var value = dict[name];
            var pair = name + "=" + value;
            pairs.push(pair);
        }

        return pairs;
    }

     function invokeMethod(objectName, functionName, args) {
        if (!functionName) {
            throw new Error("Missing function name");
        }

        const urlBase = `sandbox://${objectName}/${functionName}`;
        const pairs = buildQueryPairsFromArguments(args);
        if (pairs.length > 0) {
            this.openSandboxURL(urlBase + "?" + pairs.join("&"));
        } else {
            this.openSandboxURL(urlBase);
        }
    }

    function openSandboxURL(src) {
        var newFrameElm = document.createElement("IFRAME");
        //    var request = new XMLHttpRequest();
        //    request.open("POST", src);
        //    request.send();
        var rootElm = document.documentElement;
        newFrameElm.setAttribute("src", src);
        rootElm.appendChild(newFrameElm);
        //remove the frame now
        // newFrameElm.parentNode.removeChild(newFrameElm);
        console.log(src);
    }
    </script>
</head>
<body>
    <div class="center border">
        <H1>Test, pick your action:</H1>
        <div class="center">
            <!-- Google Ads -->
            <div>
                <H2>Google Ads</H2>
                <input id="btnGoogleAdsBanner" type="button" value="Google Ads Banner"></input>
                <div class="spacer"></div>
                <input id="btnGoogleAdsInterstitial" type="button" value="Google AdMob Interstitial"></input>
                <div class="spacer"></div>
                <input id="btnGoogleAdsRewardVideo" type="button" value="Google AdMob Reward Video"></input>
            </div>
            
            <!-- Mintegral -->
            <div>
                <H2>Mintegral</H2>
                <input id="btnShowMintegralBanner" type="button" value="Mintegral Banner"></input>
                <div class="spacer"></div>
                <input id="btnShowVideoInterstitial" type="button" value="Mintegral Video Interstitial"></input>
                <div class="spacer"></div>
                <input id="btnShowStaticInterstitial" type="button" value="Mintegral Static Interstitial"></input>
            </div>

            <!-- Bytedance -->
            <div>
                <H2>Bytedance</H2>
                <input id="btnShowBytedanceBanner" type="button" value="Bytedance Banner"></input>
                <div class="spacer"></div>
                <input id="btnShowBytedancVideo" type="button" value="Bytedance Video"></input>
                <div class="spacer"></div>
                <input id="btnShowBytedancRewarded" type="button" value="Bytedance Rewarded"></input>
            </div>
            <div class="spacer"></div>
            <div class="spacer"></div>
            <div class="spacer"></div>  
        </div>
    </div>
    <script type="text/javascript">
        // Google
        document.getElementById("btnGoogleAdsBanner").addEventListener('click', function() {
            invokeMethod("GoogleAdmob", "showBanner");
        });
        document.getElementById("btnGoogleAdsInterstitial").addEventListener('click', function() {
            invokeMethod("GoogleAdmob", "showInterstitial");
        });
        document.getElementById("btnGoogleAdsRewardVideo").addEventListener('click', function() {
            invokeMethod("GoogleAdmob", "showRewarded");
        });

        // Mintegral
        document.getElementById("btnShowMintegralBanner").addEventListener('click', function() {
            invokeMethod("Mintegral", "showBanner");
        });
        document.getElementById("btnShowVideoInterstitial").addEventListener('click', function() {
            invokeMethod("Mintegral", "showVideoInterstitial");
        });
        document.getElementById("btnShowStaticInterstitial").addEventListener('click', function() {
            invokeMethod("Mintegral", "showStaticInterstitial");
        });

        // Bytedance
        document.getElementById("btnShowBytedanceBanner").addEventListener('click', function() {
            invokeMethod("Bytedance", "showBanner");
        });
        document.getElementById("btnShowBytedancVideo").addEventListener('click', function() {
            invokeMethod("Bytedance", "showVideo");
        });
        document.getElementById("btnShowBytedancRewarded").addEventListener('click', function() {
            invokeMethod("Bytedance", "showRewarded");
        });
    </script>
</body>
</html>
